<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Use correct character set. -->
    <meta charset="utf-8">
    <!-- Tell IE to use the latest, best version. -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Make the application on mobile take up the full browser screen and disable user scaling. -->
    <meta name="viewport"
          content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <title>Vport</title>
    <script src="cesium/Cesium.js"></script>
    <script src="cesium/Sandcastle-header.js"></script>
    <script src="cesium/jquery-2.1.4.min.js"></script>
    <script src="cesium/jquery-form.js"></script>
    <script src="cesium/xlsx.core.min.js"></script>
    <script src="cesium/ysc/ysc.js"></script>
    <script src="https://code.highcharts.com/highcharts.src.js"></script>
    <script src="https://code.highcharts.com.cn/highcharts/highcharts.js"></script>
    <script src="https://code.highcharts.com.cn/highcharts/highcharts-more.js"></script>
    <script src="https://code.highcharts.com.cn/highcharts/modules/exporting.js"></script>
    <script src="https://code.highcharts.com.cn/highcharts/modules/oldie.js"></script>
    <script src="https://code.highcharts.com.cn/highcharts/themes/dark-unica.js"></script>
    <script src="functions/hcharts.js"></script>
    <script src="functions/models.js"></script>
    <script src="functions/showrelations.js"></script>
    <link type="text/css" rel="stylesheet" href="css/version1.css" />
    <link type="text/css" rel="stylesheet" href="css/hcharts.css" />
    <link type="text/css" rel="stylesheet" href="css/models.css" />
    <link rel="stylesheet" type="text/css" href="icons/iconfont.css">

</head>
<body>

<div id="cesiumContainer" class="fullSize"></div>
<div class="leftMenu" id="modelInfo">
    <p></p>
</div>
<div id="toolbar" style="display:block;">
    <div style="color: white;align: center">
        按F9隐藏菜单
    </div>
    <div>
        <div style="float:left;width:100%;">
            <div id="CreateCase" style="float: left">
            </div>
            <div style="float: left">
                <input type="file" id="case_file" style="display:none">
                <form id="kinetic_files" method="post" enctype="multipart/form-data" style="display:none"
                      action="/uploads" target="nm_iframe">
                    <input type="file" id="files" onchange="formSubmit()" name="upload" webkitdirectory mozdirectory>
                    <input type="submit" id="upload_confirm" value="确认上传文件夹">
                </form>

                <form action="/upload" , enctype="multipart/form-data" method="post" style="display:none">
                    <input type="file" name="upload" multiple="multipart">
                    <input type="submit" value="确认上传文件">
                </form>
                <iframe id="id_iframe" name="nm_iframe" style="display:none;"></iframe>
                <!--<input type="file" id="kinetic_file" webkitdirectory directory style="display:none" onchange="get_kinetic_file(this.value)">-->
                <table>
                    <tr>
                        <td style="color: white">请选择案件：</td>
                        <td><select id="case_id" class="case_select" style="width: 50px" onchange="get_scenes(this.value)">
                            <option value="volvo" hidden>ID</option>
                        </select></td>
                    </tr>
                </table>
            </div>
        </div>
        <div style="width:100%">
            <div id="CreateScene" style="float: left">
            </div>
            <div style="float: left">
                <table>
                    <tr>
                        <td style="color: white">请选择场景：</td>
                        <td><select id="scene_id" class="case_select" style="width: 50px" onchange="select_scene(this.value)">
                            <option value="" hidden>ID</option>
                        </select></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <div id="operations" style="float: left;display:none">

        <div id="model_modify" class="model_modify" style="display: none">
            <div id="ModelModifyMenu" class="modelModify">

                <!--            <div>Height-offset</div>-->
                <!--            <input type="range" min="-180.0" max="180.0" step="1" data-bind="value: height, valueUpdate: 'input'">-->
                <!--            <input type="text" size="3" data-bind="value: height">-->

                <span style="color:white;">RotateX:</span>
                <input type="range" min="-180" max="180" step="1" data-bind="value: RotateX, valueUpdate: 'input'" style="width: 80px">
                <input type="text" disabled="disabled" size="3" data-bind="value: RotateX" style="width: 28px">

                <span style="color:white;">RotateY:</span>
                <input type="range" min="-180" max="180" step="1" data-bind="value: RotateY, valueUpdate: 'input'" style="width: 80px">
                <input type="text" disabled="disabled" size="3" data-bind="value: RotateY" style="width: 28px">

                <span style="color:white;">RotateZ:</span>
                <input type="range" min="0" max="90" step="1" data-bind="value: RotateZ, valueUpdate: 'input'" style="width: 80px">
                <input type="text" disabled="disabled" size="3" data-bind="value: RotateZ" style="width: 28px">
            </div>
            <div style="background-color: transparent; float:top;padding-top: 10px;text-align:center" align="center">
                <button style="height:20px;width:50px;color: white;background-color: transparent;border: 1px solid white" onClick="modelModifyClose()">退出</button>
            </div>
        </div>

        <div id="imprint"></div>
        <div id="thing"></div>
        <div id="subject"></div>
        <div id="information"></div>
        <div id="functions"></div>
        <div id="modeltype"></div>


        <div id="imprintshow" style="display: none;position: absolute">
<!--            <select class="case_select" onchange="">-->
<!--                <option value="volvo" hidden>要素类别</option>-->
<!--                <option value="scene_handprint">手印痕迹</option>-->
<!--                <option value="scene_footprint">足迹痕迹</option>-->
<!--                <option value="scene_toolmark">工具痕迹</option>-->
<!--                <option value="scene_bio_evidence">生物物证</option>-->
<!--                <option value="scene_file_evidence">文检物证</option>-->
<!--                <option value="scene_elec_evidence">电子物证</option>-->
<!--            </select>-->
            <input type="button" class="second_button" value="手印痕迹">
            <input type="button" class="second_button" value="足迹痕迹">
            <input type="button" class="second_button" value="工具痕迹">
            <input type="button" class="second_button" value="生物物证">
            <input type="button" class="second_button" value="文检物证">
            <input type="button" class="second_button" value="电子物证">
        </div>
        <div id="thingshow" style="display: none;position: relative">
<!--            <select class="case_select" onchange="">-->
<!--                <option value="volvo" hidden>物品类别</option>-->
<!--                <option value="thing_tea_table">茶几</option>-->
<!--                <option value="thing_kitchen_supplies">厨房</option>-->
<!--                <option value="thing_cupboard">橱柜</option>-->
<!--                <option value="thing_window">窗户</option>-->
<!--                <option value="thing_bed">床</option>-->
<!--                <option value="thing_stool">凳子</option>-->
<!--                <option value="thing_electronic_device">电子器件</option>-->
<!--                <option value="thing_shelf">架子</option>-->
<!--                <option value="thing_door">门</option>-->
<!--                <option value="thing_person">人</option>-->
<!--                <option value="thing_sofa">沙发</option>-->
<!--                <option value="thing_toiletries">卫浴用品</option>-->
<!--                <option value="thing_chair">椅子</option>-->
<!--                <option value="thing_table">桌子</option>-->
<!--            </select>-->
            <input type="button" class="second_button" value="茶几">
            <input type="button" class="second_button" value="厨房">
            <input type="button" class="second_button" value="橱柜">
            <input type="button" class="second_button" value="窗户">
            <input type="button" class="second_button" value="床">
            <input type="button" class="second_button" value="凳子">
            <input type="button" class="second_button" value="电子器件">
            <input type="button" class="second_button" value="架子">
            <input type="button" class="second_button" value="门">
            <input type="button" class="second_button" value="人">
            <input type="button" class="second_button" value="沙发">
            <input type="button" class="second_button" value="卫浴用品">
            <input type="button" class="second_button" value="椅子">
            <input type="button" class="second_button" value="桌子">
        </div>
        <div id="subjectshow" style="display: none;position: absolute;margin-top: -125px;margin-left: 60px">
<!--            <select class="case_select" onchange="">-->
<!--                <option value="volvo" hidden>要素类别</option>-->
<!--                <option value="scene_handprint">手印痕迹</option>-->
<!--                <option value="scene_footprint">足迹痕迹</option>-->
<!--                <option value="scene_toolmark">工具痕迹</option>-->
<!--                <option value="scene_bio_evidence">生物物证</option>-->
<!--                <option value="scene_file_evidence">文检物证</option>-->
<!--                <option value="scene_elec_evidence">电子物证</option>-->
<!--            </select>-->
            <input type="button" class="second_button" value="手印痕迹">
            <input type="button" class="second_button" value="足迹痕迹">
            <input type="button" class="second_button" value="工具痕迹">
            <input type="button" class="second_button" value="生物物证">
            <input type="button" class="second_button" value="文检物证">
            <input type="button" class="second_button" value="电子物证">
        </div>
        <div id="informationshow" style="display: none;position: relative">
<!--            <select class="case_select" onchange="">-->
<!--                <option value="volvo" hidden>要素类别</option>-->
<!--                <option value="scene_handprint">手印痕迹</option>-->
<!--                <option value="scene_footprint">足迹痕迹</option>-->
<!--                <option value="scene_toolmark">工具痕迹</option>-->
<!--                <option value="scene_bio_evidence">生物物证</option>-->
<!--                <option value="scene_file_evidence">文检物证</option>-->
<!--                <option value="scene_elec_evidence">电子物证</option>-->
<!--            </select>-->
            <input type="button" class="second_button" value="手印痕迹">
            <input type="button" class="second_button" value="足迹痕迹">
            <input type="button" class="second_button" value="工具痕迹">
            <input type="button" class="second_button" value="生物物证">
            <input type="button" class="second_button" value="文检物证">
            <input type="button" class="second_button" value="电子物证">
        </div>
        <div id="functionshow" style="display: none;position: relative">
<!--            <select class="case_select" onchange="">-->
<!--                <option value="volvo" hidden>功能演示</option>-->
<!--                <option value="route_independent">自主路线</option>-->
<!--                <option value="judge_standard">研判标准</option>-->
<!--                <option value="geography_measure">地理测量</option>-->
<!--                <option value="explosion_effect">爆炸效果</option>-->
<!--                <option value="explosion_wave">冲击波</option>-->
<!--            </select>-->
            <input type="button" class="second_button" value="自主路线">
            <input type="button" class="second_button" value="研判标准">
            <input type="button" class="second_button" value="地理测量">
            <input type="button" class="second_button" value="爆炸效果">
            <input type="button" class="second_button" value="冲击波">
        </div>
        <div id="modelshow" style="display: none;position: relative;">
<!--            <select class="case_select" onchange="">-->
<!--                <option value="volvo" hidden>功能演示</option>-->
<!--                <option value="burn">燃烧模型</option>-->
<!--                <option value="collision">碰撞模型</option>-->
<!--                <option value="explosion">爆炸模型</option>-->
<!--                <option value="kill">砍杀模型</option>-->
<!--                <option value="mixture">混合模型</option>-->
<!--            </select>-->

            <input type="button" class="second_button" value="燃烧模型">
            <input type="button" class="second_button" value="碰撞模型">
            <input type="button" class="second_button" value="爆炸模型">
            <input type="button" class="second_button" value="砍杀模型">
            <input type="button" class="second_button" value="混合模型">
        </div>



        <div id="caseMenu"></div>
        <div id="MeasureMenu"></div>
        <div id="modelMenu"></div>
        <div id="DynRoute"></div>
        <div>
            <div>
                <div id="KineticMenu" style="float: left;"></div>
                <div style="float: left;">
                    <table>
                        <tr>
                            <td><select id="kinetic_model" class="case_select">
                                <option value="volvo" hidden>选择动力学模型</option>
                            </select></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <div>
            <div>
                <div id="ModelMeasure" style="float: left;"></div>
                <div style="float: left;">
                    <table>
                        <tr>
                            <td><select id="models" class="case_select" onchange="locate_model(this.value)">
                                <option value="volvo" hidden>要素与场信息</option>
                            </select></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <div>
            <div>
                <table>
                    <tr>
                        <td>
                            <select id="top_icon_menu" class="case_select"
                                    onchange="get_sub_menu(this.value)">
                                <option value="volvo" hidden>选择图标大类</option>
                                <option value="办公类">办公类</option>
                                <option value="电子类">电子类</option>
                                <option value="交通类">交通类</option>
                                <option value="器具类">器具类</option>
                                <option value="生活类">生活类</option>
                                <option value="植物类">植物类</option>
                                <option value="主体类">主体类</option>
                                <option value="装饰类">装饰类</option>
                            </select>
                        </td>
                        <td><select id="sub_icon_menu" class="case_select"
                                    onchange="get_icon_menu(this.value)">
                            <option value="volvo" hidden>选择图标子类</option>
                        </select></td>

                        <td><select id="icon_menu" class="case_select"
                                    onchange="get_icon_image(this.value)">
                            <option value="volvo" hidden>选择图标图片</option>
                        </select></td>
                    </tr>

                </table>
            </div>
        </div>
        <!--        <div>-->
        <!--            <div>-->
        <!--                <div id="NewAddedMenu" style="float: left;"></div>-->
        <!--                <div> &lt;!&ndash;style="float: left;"&ndash;&gt;-->
        <!--                    <table>-->
        <!--                        <tr>-->
        <!--                            <td><select id="begin_end" class="case_select" onchange="route_choose(this.value)">-->
        <!--                                <option value="route_choose">城市路线推荐</option>-->
        <!--                                <option value="route_begin">路线起点</option>-->
        <!--                                <option value="route_end">路线终点</option>-->
        <!--                            </select></td>-->
        <!--                        </tr>-->
        <!--                    </table>-->
        <!--                </div>-->
        <!--            </div>-->
        <!--        </div>-->
        <div>
            <div style="float: left">
                <div id="markMenu" style="float: left"></div>
                <div style="float: left">
                    <input id="element_file" type="file" style="display:none" accept=".xls,.xlsx"
                           onchange="importFile(this)">
                    <table>
                        <tr>
                            <td><select id="element_type" class="case_select"
                                        onchange="get_element_menu(this.value)">
                                <option value="volvo" hidden>要素类别</option>
                                <option value="scene_handprint">手印痕迹</option>
                                <option value="scene_footprint">足迹痕迹</option>
                                <option value="scene_toolmark">工具痕迹</option>
                                <option value="scene_bio_evidence">生物物证</option>
                                <option value="scene_file_evidence">文检物证</option>
                                <option value="scene_elec_evidence">电子物证</option>
                            </select></td>
                            <td><select id="elements" class="case_select">
                                <option value="volvo" hidden>绑定要素</option>
                            </select></td>
                        </tr>

                    </table>
                </div>
            </div>
        </div>
        <div>
            <div style="float: left">
                <div id="infoMenu" style="float: left"></div>
                <div style="float: left">
                    <input id="info_file" type="file" style="display:none" accept=".xls,.xlsx"
                           onchange="importFile(this)">
                    <table>
                        <tr>
                            <td><select id="info_type" class="case_select"
                                        onchange="get_element_menu(this.value)">
                                <option value="volvo" hidden>信息类别</option>
                                <option value="scene_handprint">手印痕迹</option>
                                <option value="scene_footprint">足迹痕迹</option>
                                <option value="scene_toolmark">工具痕迹</option>
                                <option value="scene_bio_evidence">生物物证</option>
                                <option value="scene_file_evidence">文检物证</option>
                                <option value="scene_elec_evidence">电子物证</option>
                            </select></td>
                            <td><select id="infos" class="case_select">
                                <option value="volvo" hidden>绑定要素</option>
                            </select></td>
                        </tr>

                    </table>
                </div>
            </div>
            <div>
                <div style="float: left">
                    <div id="thingMenu" style="float: left"></div>
                    <div style="float: left">
                        <input id="thing_file" type="file" style="display:none" accept=".gltf,.xlsx,.xls"
                               onchange="importThingFile(this)">
                        <table>
                            <tr>
                                <td><select id="thing_type" class="case_select"
                                            onchange="get_thing_menu(this.value)">//thing_type
                                    <option value="volvo" hidden>物品类别</option>
                                    <option value="thing_tea_table">茶几</option>
                                    <option value="thing_kitchen_supplies">厨房</option>
                                    <option value="thing_cupboard">橱柜</option>
                                    <option value="thing_window">窗户</option>
                                    <option value="thing_bed">床</option>
                                    <option value="thing_stool">凳子</option>
                                    <option value="thing_electronic_device">电子器件</option>
                                    <option value="thing_shelf">架子</option>
                                    <option value="thing_door">门</option>
                                    <option value="thing_person">人</option>
                                    <option value="thing_sofa">沙发</option>
                                    <option value="thing_toiletries">卫浴用品</option>
                                    <option value="thing_chair">椅子</option>
                                    <option value="thing_table">桌子</option>
                                </select></td>
                                <td><select id="things" class="case_select">//things
                                    //onchange=sub_thing_menu()>//things
                                    <option value="volvo" hidden>选择物品</option>
                                </select></td>
                            </tr>

                        </table>
                    </div>
                </div>
            </div>
            <div>
                <div style="float: left">
                    <div id="humanMenu" style="float: left"></div>
                    <div style="float: left">
                        <input id="human_file" type="file" style="display:none" accept=".xls,.xlsx"
                               onchange="importFile(this)">
                        <table>
                            <tr>
                                <td><select id="human_type" class="case_select"
                                            onchange="get_element_menu(this.value)">
                                    <option value="volvo" hidden>人物类别</option>
                                    <option value="scene_handprint">手印痕迹</option>
                                    <option value="scene_footprint">足迹痕迹</option>
                                    <option value="scene_toolmark">工具痕迹</option>
                                    <option value="scene_bio_evidence">生物物证</option>
                                    <option value="scene_file_evidence">文检物证</option>
                                    <option value="scene_elec_evidence">电子物证</option>
                                </select></td>
                                <td><select id="humen" class="case_select">
                                    <option value="volvo" hidden>绑定要素</option>
                                </select></td>
                            </tr>

                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="toolbar_measure">
        <button type="button" onclick="pick()">坐标</button>

        <button type="button" onclick="heightMeasuring()">高度</button>
        <button type="button" onclick="distanceDraw()">距离</button>
        <button type="button" onclick="areaMeasuring()">面积</button>
        <button type="button" onclick="stopMeasure()">退出</button>
    </div>

    <div class="Smodel">
        <div class="model_content">
            <p><span>名称：</span><input type="text" class="Sname" placeholder="请输入名称"></p>
            <p><span>经度：</span><input type="number" class="Slongitude" placeholder="请输入经度" step="0.00001"></p>
            <p><span>纬度：</span><input type="number" class="Slatitude" placeholder="请输入纬度" step="0.00001"></p>
            <p><span>高度：</span><input type="number" class="Sheight" placeholder="请输入高度" step="0.1"></p>
            <p><span>方向：</span><input type="number" class="Sdirection" placeholder="请输入方向" value="0"></p>
            <p><span>比例：</span><input type="number" class="Sproportion" placeholder="请输入比例" value="1" min="0.1"
                                      step="0.1">
            </p>
            <p><span>预案：</span><select class="planOption">
                <option value="1">预案一</option>
                <option value="2">预案二</option>
                <option value="3">预案三</option>
            </select></p>
            <p class="modelselect_p"><span>选择模型：</span><select class="dropdownMenu">
                <option value="./img/modelImg/gou.glb">警犬</option>
                <option value="./img/modelImg/yisheng.glb">医生</option>
                <option value="./img/modelImg/wujing.glb">武警</option>
                <option value="./img/modelImg/xiaofangyuan.glb">消防员</option>
                <option value="./img/modelImg/jingchanan.glb">警察男</option>
                <option value="./img/modelImg/jingchanv.glb">警察女</option>
                <option value="./img/modelImg/fangbaoche.glb">防暴车</option>
                <option value="./img/modelImg/jingche.glb">警车</option>
                <option value="./img/modelImg/motuoche.glb">摩托车</option>
                <option value="./img/modelImg/zhihuiche.glb">指挥车</option>
                <option value="./img/modelImg/gongjiaoche.glb">公交车</option>
                <option value="./img/modelImg/jijuche.glb">救护车</option>
                <option value="./img/modelImg/jiuyuanche.glb">救援车</option>
                <option value="./img/modelImg/xiaofangche.glb">消防车</option>
                <option value="./img/modelImg/jingyonggongjiaoche.glb">警用公交车</option>
                <option value="./img/modelImg/luzhang.glb">路障</option>
                <option value="./img/modelImg/miehuoche.glb">灭火器</option>
                <option value="./img/modelImg/zucheding.glb">阻车钉</option>
            </select></p>
            <button type="button" class="StakeBtn" onclick="siteModelTake('.Slongitude','.Slatitude','.Sheight')">量取
            </button>
            <button type="button" class="Ssubmit" onclick="addModelInfo()">提交</button>
            <button type="button" class="Sdropout" onclick="stopModel()">退出</button>

        </div>
    </div>

    <div class="caseMenuShow">
        <div class="firemodel">
            <table style="background-color:transparent;">
                <tr>
                    <td style="padding-left:5px;padding-top:10px;color: #ffffcc">放火位置：</td>
                    <td style="padding-left:4px;padding-top:10px">
                        <select id="position" style="width:70px;height:20px">
                            <option value="smoke">沙发上</option>
                            <option value="fire2">床上</option>
                            <option value="bus">公交车</option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td style="padding-left:5px;padding-top:10px;color: #ffffcc">门窗开关：</td>
                    <td style="padding-left:4px;padding-top:10px">
                        <select id="door_status" style="width:70px;height:20px">
                            <option value="1">开</option>
                            <option value="2">关</option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td style="padding-left:5px;padding-top:10px;color: #ffffcc">燃剂类型：</td>
                    <td style="padding-left:4px;padding-top:10px">
                        <select id="fuel" style="width:70px;height:20px">
                            <option value="1">汽油</option>
                            <option value="2">酒精</option>
                            <option value="3">稀料</option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td style="padding-left:5px;padding-top:10px;color: #ffffcc">燃剂容量：</td>
                    <td style="padding-left:4px;padding-top:10px">
                        <select id="capacity" style="width:70px;height:20px">
                            <option value="1">200ml</option>
                            <option value="2">500ml</option>
                            <option value="3">1L</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td style="padding-left:5px;padding-top:10px;color: #ffffcc">材料选择：</td>
                    <td style="padding-left:4px;padding-top:10px">
                        <select id="material" style="width:70px;height:20px">
                            <option value="1">木头</option>
                            <option value="2">塑料</option>
                            <option value="3">织物</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td style="padding-left:5px;padding-top:10px;color: #ffffcc">持续时间：</td>
                    <td style="padding-left:4px;padding-top:10px">
                        <select id="duration" style="width:70px;height:20px">
                            <option value="1">2分钟</option>
                            <option value="2">10分钟</option>
                            <option value="3">20分钟</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td style="padding-left:5px;padding-top:10px;color: #ffffcc">输出信息：</td>
                    <td style="padding-left:4px;padding-top:10px">
                        <p style="color: #ffffcc"><input type="checkbox" id="fire_output" value="Bike"/>火焰</p>
                        <p style="color: #ffffcc"><input type="checkbox" id="smoke_output" value="Bike"/>烟雾</p>
                        <p style="color: #ffffcc"><input type="checkbox" id="model_output" value="Bike" checked="checked"/>模型</p>
                        <p style="color: #ffffcc"><input type="checkbox" id="temperature_output" value="Bike" checked="checked"/>截面温度</p>
                    </td>
                </tr>
            </table>
        </div>
        <div style="background-color: transparent; float:top;padding-top: 10px;text-align:center" align="center">
            <button id="fireAdd" style="height:20px;width:50px;color: white;background-color: transparent;border: 1px solid white" onClick="fireModelConfirm()">确定</button>
            <!--            <button id="close" style="height:25px;width:65px" onClick="window.close()">取消</button>-->
            <button id="fireExit" style="height:20px;width:50px;color: white;background-color: transparent;border: 1px solid white" onClick="fireModelClose()">退出</button>
        </div>
    </div>
    <div class="collisionMenuShow">
        <div class="collisionModel">
            <table style="background-color:transparent;">

                <tr>
                    <td style="padding-left:5px;padding-top:10px;color: white">身高：</td>
                    <td style="padding-left:4px;padding-top:10px">
                        <select id="height" style="width:120px;height:25px" >
                            <option value="1">高</option>
                            <option value="2">中</option>
                            <option value="3">矮</option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td style="padding-left:5px;padding-top:10px;color: white">姿态方向：</td>
                    <td style="padding-left:4px;padding-top:10px">
                        <select id="posture" style="width:120px;height:25px">
                            <option value="1">正面</option>
                            <option value="2">侧面</option>
                            <option value="3">背面</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td style="padding-left:5px;padding-top:10px;color: white">车辆类型：</td>
                    <td style="padding-left:4px;padding-top:10px">
                        <select id="car_type" style="width:120px;height:25px">
                            <option value="1">轿车</option>
                            <option value="2">越野车</option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td style="padding-left:5px;padding-top:10px;color: white">道路位置：</td>
                    <td style="padding-left:4px;padding-top:10px">
                        <select id="roadPosition" style="width:120px;height:25px">
                            <option value="1">路段</option>
                            <option value="2">交叉口</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td style="padding-left:5px;padding-top:10px;color: white">痕迹：</td>
                    <td style="padding-left:4px;padding-top:10px">
                        <select id="trace" style="width:120px;height:25px">
                            <option value="1">人体痕迹-有无</option>
                            <option value="2">车辆痕迹-有无</option>
                        </select>
                    </td>
                </tr>
            </table>
        </div>

        <div style="background-color: transparent; float:top;padding-top: 20px;text-align:center" align="center">
            <button id="collisionAdd" style="height:20px;width:50px;color: white;background-color: transparent;border: 1px solid white" onClick="collisionModelConfirm()">确定</button>
            <!--            <button id="close" style="height:25px;width:65px" onClick="window.close()">取消</button>-->
            <button id="collisionExit" style="height:20px;width:50px;color: white;background-color: transparent;border: 1px solid white" onClick="collisionModelClose()">退出</button>
        </div>
    </div>
    <div class="explodeMenuShow">
        <div class="explodeModel" >
            <table style="background-color:transparent;">

                <tr>
                    <td style="padding-left:5px;padding-top:10px;color: white">结构体：</td>
                    <td style="padding-left:4px;padding-top:10px">
                        <select id="structure" style="width:120px;height:25px" onchange="stru_changed()">
                            <option value="1">土体-一般土体</option>
                            <option value="2">土体-沥青地面</option>
                            <option value="3">土体-混凝土地面</option>
                            <option value="4">建筑</option>
                            <option value="5">车体</option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td style="padding-left:5px;padding-top:10px;color: white">爆点位置：</td>
                    <td style="padding-left:4px;padding-top:10px">
                        <select id="explodePosition" style="width:120px;height:25px">
                            <option value="1">接触</option>
                            <option value="2">悬空</option>
                            <option value="3">埋爆</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td style="padding-left:5px;padding-top:10px;color: white">炸药类型：</td>
                    <td style="padding-left:4px;padding-top:10px">
                        <select id="type" style="width:120px;height:25px">
                            <option value="1">TNT</option>
                            <option value="2">硝铵</option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td style="padding-left:5px;padding-top:10px;color: white">炸药当量：</td>
                    <td style="padding-left:4px;padding-top:10px">
                        <select id="weight" style="width:120px;height:25px">
                            <option value="1">1kg</option>
                            <option value="2">5kg</option>
                            <option value="3">10kg</option>
                        </select>
                    </td>
                </tr>
            </table>
        </div>

        <div style="background-color: transparent; float:top;padding-top: 20px;text-align:center" align="center">
            <button id="explodeAdd" style="height:20px;width:50px;color: white;background-color: transparent;border: 1px solid white" onClick="explodeModelConfirm()">确定</button>
            <!--            <button id="close" style="height:25px;width:65px" onClick="window.close()">取消</button>-->
            <button id="explodeExit" style="height:20px;width:50px;color: white;background-color: transparent;border: 1px solid white" onClick="explodeModelClose()">退出</button>
        </div>
    </div>
    <div class="killMenuShow">
        <div class="killModel">
            <table style="background-color:transparent;">

                <tr>
                    <td style="padding-left:5px;padding-top:10px;color: white">加害人信息：</td>
                    <td style="padding-left:4px;padding-top:10px">
                        <select id="criminal" style="width:120px;height:25px" >
                            <option value="1">身高</option>
                            <option value="2">体重</option>
                            <option value="3">性别</option>
                            <option value="4">年龄</option>
                        </select>
                    </td>
                    <td style="padding-left:5px;padding-top:10px">
                        <input type="text" class="killInput">
                    </td>
                </tr>

                <tr>
                    <td style="padding-left:5px;padding-top:10px;color: white">被害人信息：</td>
                    <td style="padding-left:4px;padding-top:10px">
                        <select id="victim" style="width:120px;height:25px">
                            <option value="1">身高</option>
                            <option value="2">体重</option>
                            <option value="3">性别</option>
                            <option value="4">年龄</option>
                        </select>
                    </td>
                    <td style="padding-left:5px;padding-top:10px">
                        <input type="text" class="killInput">
                    </td>
                </tr>
                <tr>
                    <td style="padding-left:5px;padding-top:10px;color: white">被害人体位信息：</td>
                    <td style="padding-left:4px;padding-top:10px">
                        <select id="victim_posture" style="width:120px;height:25px">
                            <option value="1">正面站姿</option>
                            <option value="2">反面站姿</option>
                            <option value="3">正面坐姿</option>
                            <option value="4">正面坐姿</option>
                            <option value="5">俯卧</option>
                            <option value="6">侧卧</option>
                        </select>
                    </td>
                    <td style="padding-left:5px;padding-top:10px">
                        <input type="text" class="killInput">
                    </td>
                </tr>

                <tr>
                    <td style="padding-left:5px;padding-top:10px;color: white">道路位置：</td>
                    <td style="padding-left:4px;padding-top:10px">
                        <select id="criminal_posture" style="width:120px;height:25px">
                            <option value="1">动力学-砍击或刺杀</option>
                            <option value="2">体位姿态-站姿或坐姿</option>
                        </select>
                    </td>
                    <td style="padding-left:5px;padding-top:10px">
                        <input type="text" class="killInput">
                    </td>
                </tr>
                <tr>
                    <td style="padding-left:5px;padding-top:10px;color: white">刀具信息：</td>
                    <td style="padding-left:4px;padding-top:10px">
                        <select id="knife" style="width:120px;height:25px">
                            <option value="1">重量</option>
                            <option value="2">材质</option>
                            <option value="3">刀柄长</option>
                            <option value="4">刀柄宽</option>
                            <option value="5">刀柄厚</option>
                            <option value="6">刀身长</option>
                            <option value="7">刀身宽</option>
                            <option value="8">刀身厚</option>
                        </select>
                    </td>
                    <td style="padding-left:5px;padding-top:10px">
                        <input type="text" class="killInput">
                    </td>
                </tr>
                <tr>
                    <td style="padding-left:5px;padding-top:10px;color: white">环境信息：</td>
                    <td style="padding-left:4px;padding-top:10px">
                        <select id="environment" style="width:120px;height:25px">
                            <option value="1">-开阔</option>
                            <option value="2">-狭窄</option>
                            <option value="3">-室内</option>
                            <option value="4">-室外</option>
                        </select>
                    </td>
                    <td style="padding-left:5px;padding-top:10px">
                        <input type="text" class="killInput">
                    </td>
                </tr>
                <tr>
                    <td style="padding-left:5px;padding-top:10px;color: white">砍创信息：</td>
                    <td style="padding-left:4px;padding-top:10px">
                        <select id="wound" style="width:120px;height:25px">
                            <option value="1">砍创部位</option>
                            <option value="2">--头</option>
                            <option value="3">--颈</option>
                            <option value="4">--胸</option>
                            <option value="5">--腹</option>
                            <option value="6">--上肢</option>
                            <option value="7">砍创形态</option>
                            <option value="8">--特征</option>
                            <option value="9">--宽度</option>
                            <option value="10">--深度</option>
                        </select>
                    </td>
                    <td style="padding-left:5px;padding-top:10px">
                        <input type="text" class="killInput">
                    </td>
                </tr>
            </table>
        </div>
        <div style="background-color: transparent; float:top;padding-top: 20px;text-align:center" align="center">
            <button id="killAdd" style="height:20px;width:50px;color: white;background-color: transparent;border: 1px solid white" onClick="killModelConfirm()">确定</button>
            <!--            <button id="close" style="height:25px;width:65px" onClick="window.close()">取消</button>-->
            <button id="killExit" style="height:20px;width:50px;color: white;background-color: transparent;border: 1px solid white" onClick="killModelClose()">退出</button>
        </div>
    </div>

    <div id="menu">
        <button id="show_model_info" type="button" style="width:125px;" onclick="show_model_info()">显示详情</button>
        <button type="button" style="width:125px;">删除标定</button>
        <button type="button" style="width:125px;">更改位置</button>
    </div>
    <div id="start_kinetic_model" style="display: none">
        <button id="start_fire_model" onclick="start_fire()"></button>
        <input id="fire_type_name" value="smoke">
        <button id="start_collision_model" onclick="start_collision()"></button>
        <button id="start_explosion_model" onclick="start_explosion()"></button>
        <button id="start_kill_model" onclick="start_kill()"></button>
    </div>
</div>
<div id="rightmenu" style="display:block;">
    <div id = "functionsarea">
        <div style="float: right;">
            <div>
                <table style="float: right;margin-right: -25px">
                    <tr>
                        <td colspan="2" style="text-align: right"><span style="color: #00c0ef;padding-right: 25px">按F10隐藏菜单</span></td>
                    </tr>
                    <tr>
                        <td colspan="2" style="text-align: right;padding-right: 25px"><span style="color: deepskyblue;">操作</span></td>
                    </tr>
                    <tr>
                        <td><button id="new" class="charts" onclick=""><img src="icons/new.png" width="20px" height="20px"></button> </td>
                        <td><button id="import" class="charts" onclick=""><img src="icons/import.png" width="25px" height="25px"></button> </td>
                    </tr>
                    <tr>
                        <td><button id="mark" class="charts" onclick=""><img src="icons/mark.png" width="20px" height="20px"></button> </td>
                        <td><button id="show" class="charts" onclick=""><img src="icons/show.png" width="20px" height="20px"></button> </td>
                    </tr>
                    <tr>
                        <td><button id="track" class="charts" onclick=""><img src="icons/track.png" width="20px" height="20px"></button> </td>
                        <td><button id="area" class="charts" onclick=""><img src="icons/area.png" width="20px" height="20px"></button> </td>
                    </tr>
                    <tr>
                        <td><button id="relate" class="charts" onclick="mdoelrelation()"><img src="icons/relate.png" width="20px" height="20px"></button> </td>
                        <td><button id="align" class="charts" onclick=""><img src="icons/align.png" width="20px" height="20px"></button> </td>
                    </tr>
                    <tr>
                        <td><button id="adjust" class="charts" onclick="rightmodelmodify()"><img src="icons/adjust.png" width="20px" height="20px"></button> </td>
                        <td><button id="measure" class="charts" onclick=""><img src="icons/measure.png" width="20px" height="20px"></button> </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <div class="hchartshow">
        <div style="float: right;">
            <table>
                <tr>
                    <td colspan="2" style="text-align: right"><span style="color: deepskyblue">图表</span></td>
                </tr>
                <tr>
                    <td><button id="linechart" class="charts" onclick="lineshow()"><img src="icons/line.png" width="25px" height="25px"></button></td>
                    <td><button id="barchart" class="charts" onclick="barshow()"><img src="icons/bar.png" width="25px" height="25px"></button></td>
                </tr>
                <tr>
                    <td><button id="piechart" class="charts" onclick="pieshow()"><img src="icons/pie.png" width="25px" height="25px"></button></td>
                    <td><button id="bubblechart" class="charts" onclick="bubbleshow()"><img src="icons/bubble.png" width="25px" height="25px"></button></td>
                </tr>
            </table>
        </div>
    </div>
    <div id = "signs">
        <div style="float: right;">
            <table>
                <tr>
                    <td colspan="2" style="text-align: right"><span style="color: deepskyblue">符号</span></td>
                </tr>
                <tr>
                    <td><button id="sign_upload" class="charts" onclick=""><img src="icons/upload.png" width="20px" height="20px"></button></td>
                    <td><button id="sign_create" class="charts" onclick=""><img src="icons/create.png" width="20px" height="20px"></button></td>
                </tr>
            </table>
        </div>
    </div>
    <div id = "sign_models">
        <div style="float: right">
            <table>
                <tr>
                    <td colspan="2" style="text-align: right"><span style="color: deepskyblue">模型</span></td>
                </tr>
                <tr>
                    <td><button id="model_upload" class="charts" onclick=""><img src="icons/upload.png" width="20px" height="20px"></button></td>
                    <td><button id="model_create" class="charts" onclick=""><img src="icons/create.png" width="20px" height="20px"></button></td>
                </tr>
            </table>
        </div>
    </div>
</div>
<div id="line">
    <div id="container1" style="height: 180px;width: 400px;"></div>
</div>
<div id="bar">
    <div id="container2" style="height: 180px;width: 400px;"></div>
</div>
<div id="pie">
    <div id="container3" style="height: 180px;width: 340px;"></div>
</div>
<div id="bubble">
    <div id="container4" style="height: 350px;width: 260px;"></div>
</div>

<script src="cesium/Cesium.js"></script>
<script src="cesium/Sandcastle-header.js"></script>
<script src="cesium/jquery-2.1.4.min.js"></script>
<script src="cesium/jquery-form.js"></script>
<script src="cesium/xlsx.core.min.js"></script>

<script>
    var viewer = new Cesium.Viewer('cesiumContainer', {
        shouldAnimate: false,
        baseLayerPicker: false,
        homeButton: false,       //是否显示home键
        timeline: true,        //是否显示时间线控件
        fullscreenButton: false, //是否全屏显示
        scene3DOnly: true,     //如果设置为true，则所有几何图形以3D模式绘制以节约GPU资源
        infoBox: true,         //是否显示点击要素之后显示的信息
        sceneModePicker: false,  //是否显示投影方式控件  三维/二维
        navigationInstructionsInitiallyVisible: false,
        navigationHelpButton: false,     //是否显示帮助信息控件
        selectionIndicator: false,        //是否显示指示器组件
        imageryProvider: new Cesium.ArcGisMapServerImageryProvider({
            url: 'https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer'
        }),
        // imageryProvider: new Cesium.createTileMapServiceImageryProvider({
        //     url: 'cesium/googleTMS',
        // }),
        // terrainProvider: Cesium.createWorldTerrain()//加载地势
    });
    viewer._cesiumWidget._creditContainer.style.display = "none";  //	去除版权信息
    viewer.scene.globe.depthTestAgainstTerrain = false;
    // viewer.camera.setView({
    //     destination: Cesium.Cartesian3.fromDegrees(105.07224017290507, 36.56475804850547, 4889916.564370803),
    //     orientation: {
    //         heading: 0.0,
    //         pitch: Cesium.Math.toRadians(-90.0),
    //         roll: 0.0
    //     }
    // });
    var scene = viewer.scene;
    var clock = viewer.clock;


    var operation_type;
    var element_image = "cesium/images/left_foot.JPG";
    var thing_gltf = 'cesium/Models/Test/model.gltf';
    var dog_gltf = 'cesium/Models/Test/dog.gltf';
    var mark_color = Cesium.Color.WHITE;
    var dataSourcePromise;

    var viewModel = {
        RotateX:0,
        RotateY:0,
        RotateZ:0
    };

    Cesium.knockout.track(viewModel); // 跟踪此Model
    var toolbar_hpr = document.getElementById('ModelModifyMenu'); // 获取前端监控div
    Cesium.knockout.applyBindings(viewModel, toolbar_hpr); // 绑定监控



    var modelMatrix = Cesium.Transforms.eastNorthUpToFixedFrame(
        Cesium.Cartesian3.fromDegrees(114.22374911095045, 30.357474991097224, 0)
    );
    var entity3 = viewer.scene.primitives.add(Cesium.Model.fromGltf({    //fromGltf方法：从Gltf资源加载模型
            url: dog_gltf,
            modelMatrix: modelMatrix,
            // minimumPixelSize : 512,
            scale: 0.1,
            // maximumScale : 200000
        })
    );
    viewer.camera.flyTo({
        destination: Cesium.Cartesian3.fromDegrees(114.22374911095045, 30.357474991097224, 700.0)
    });//初始视角

    update_model_hpr(entity3)



    function update_model_hpr(entity) {
        Cesium.knockout.getObservable(viewModel, 'RotateX').subscribe(function (RotateX) {
            RotateX = Number(RotateX);
            if (isNaN(RotateX)) {
                return;
            }
            var m = entity.modelMatrix;
            var m1 = Cesium.Matrix3.fromRotationX(Cesium.Math.toRadians(RotateX));
            entity.modelMatrix = Cesium.Matrix4.multiplyByMatrix3(m, m1, new Cesium.Matrix4());
        });

        Cesium.knockout.getObservable(viewModel, 'RotateY').subscribe(function (RotateY) {
            RotateY = Number(RotateY);
            if (isNaN(RotateY)) {
                return;
            }
            var m = entity.modelMatrix;
            var m1 = Cesium.Matrix3.fromRotationY(Cesium.Math.toRadians(RotateY));
            entity.modelMatrix = Cesium.Matrix4.multiplyByMatrix3(m, m1, new Cesium.Matrix4());
        });

        Cesium.knockout.getObservable(viewModel, 'RotateZ').subscribe(function (RotateZ) {
            RotateZ = Number(RotateZ);
            if (isNaN(RotateZ)) {
                return;
            }
            var m = entity.modelMatrix;
            var m1 = Cesium.Matrix3.fromRotationZ(Cesium.Math.toRadians(RotateZ));
            entity.modelMatrix = Cesium.Matrix4.multiplyByMatrix3(m, m1, new Cesium.Matrix4());
        });//Sandcastle_End
        Sandcastle.finishedLoading();
    }
</script>
<script src='./js/measuring.js'></script>
<script src='./js/blast.js'></script>
<script src='./js/collision.js '></script>
<script src='./js/modelMark.js'></script>
<script src='./js/plug-in.js '></script>


<script src='./functions/czml.js '></script>      <!--czml相关-->
<script src='./functions/sandcastle.js '></script>  <!-- cesium控件-->
<script src='./functions/handler.js '></script>     <!-- 鼠标事件-->
<script src='./functions/fire.js '></script>        <!-- 燃烧功能-->
<script src='./functions/collision.js '></script>   <!-- 碰撞演示功能-->
<script src='./functions/explosion.js '></script>    <!-- 爆炸演示功能-->
<script src='./functions/mix.js '></script>   <!-- 燃烧碰撞混合演示功能-->
<script src='./functions/dynamicRoute.js '></script>   <!-- 动态划线函数-->
<script src='./functions/tileset.js '></script>   <!-- 显示瓦片地图-->
<script src='./functions/menu.js '></script>   <!-- 菜单操作功能-->
<script src='./functions/onkey.js '></script>     <!--快捷键相关-->
<script src='./functions/fileSystem.js '></script>     <!--文件上传相关-->
</body>
</html>
